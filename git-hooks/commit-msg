#!/usr/bin/env bash

# Validate Conventional Commit messages: type(scope?): subject
MSG_FILE=$1
MSG=$(cat "$MSG_FILE")

# basic conventional commit regex
if ! echo "$MSG" | grep -E "^(feat|fix|docs|chore|refactor|test|ci|perf)(\([a-z0-9\-\_]+\))?:\s.+$" >/dev/null; then
  echo "Commit message does not follow Conventional Commits. Example: 'feat(module): add feature X'"
  exit 1
fi

exit 0
